{
  while (!cmd.isFinished()) {
    RootTools.log(Constants.TAG,shell.getCommandQueuePositionString(cmd));
synchronized (cmd) {
      try {
        if (!cmd.isFinished()) {
          cmd.wait(2000);
        }
      }
 catch (      InterruptedException e) {
        e.printStackTrace();
      }
    }
    if (!cmd.isExecuting() && !cmd.isFinished()) {
      if (!shell.isExecuting && !shell.isReading) {
        Log.e(Constants.TAG,"Waiting for a command to be executed in a shell that is not executing and not reading! \n\n Command: " + cmd.getCommand());
        Exception e=new Exception();
        e.setStackTrace(Thread.currentThread().getStackTrace());
        e.printStackTrace();
      }
 else       if (shell.isExecuting && !shell.isReading) {
        Log.e(Constants.TAG,"Waiting for a command to be executed in a shell that is executing but not reading! \n\n Command: " + cmd.getCommand());
        Exception e=new Exception();
        e.setStackTrace(Thread.currentThread().getStackTrace());
        e.printStackTrace();
      }
 else {
        Log.e(Constants.TAG,"Waiting for a command to be executed in a shell that is not reading! \n\n Command: " + cmd.getCommand());
        Exception e=new Exception();
        e.setStackTrace(Thread.currentThread().getStackTrace());
        e.printStackTrace();
      }
    }
  }
}
