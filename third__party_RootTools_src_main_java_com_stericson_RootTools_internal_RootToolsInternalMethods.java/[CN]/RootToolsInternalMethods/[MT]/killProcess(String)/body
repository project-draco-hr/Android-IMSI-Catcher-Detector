{
  RootTools.log("Killing process " + processName);
  InternalVariables.pid_list="";
  InternalVariables.processRunning=true;
  try {
    CommandCapture command=new CommandCapture(0,false,"ps"){
      @Override public void output(      int id,      String line){
        if (line.contains(processName)) {
          Matcher psMatcher=InternalVariables.psPattern.matcher(line);
          try {
            if (psMatcher.find()) {
              String pid=psMatcher.group(1);
              InternalVariables.pid_list+=" " + pid;
              InternalVariables.pid_list=InternalVariables.pid_list.trim();
              RootTools.log("Found pid: " + pid);
            }
 else {
              RootTools.log("Matching in ps command failed!");
            }
          }
 catch (          Exception e) {
            RootTools.log("Error with regex!");
            e.printStackTrace();
          }
        }
      }
    }
;
    RootTools.getShell(true).add(command);
    commandWait(RootTools.getShell(true),command);
    String pids=InternalVariables.pid_list;
    if (!pids.equals("")) {
      try {
        command=new CommandCapture(0,false,"kill -9 " + pids);
        RootTools.getShell(true).add(command);
        commandWait(RootTools.getShell(true),command);
        return true;
      }
 catch (      Exception e) {
        RootTools.log(e.getMessage());
      }
    }
 else {
      return true;
    }
  }
 catch (  Exception e) {
    RootTools.log(e.getMessage());
  }
  return false;
}
