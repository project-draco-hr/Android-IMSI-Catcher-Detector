{
  int lCurrentApiVersion=android.os.Build.VERSION.SDK_INT;
  try {
    if (pDevice.mCell == null) {
      pDevice.mCell=new Cell();
    }
    List<CellInfo> cellInfoList=tm.getAllCellInfo();
    if (cellInfoList != null) {
      for (      final CellInfo info : cellInfoList) {
        pDevice.mCell.setNetType(tm.getNetworkType());
        if (info instanceof CellInfoGsm) {
          final CellSignalStrengthGsm gsm=((CellInfoGsm)info).getCellSignalStrength();
          final CellIdentityGsm identityGsm=((CellInfoGsm)info).getCellIdentity();
          pDevice.mCell.setDBM(gsm.getDbm());
          pDevice.mCell.setCID(identityGsm.getCid());
          pDevice.mCell.setMCC(identityGsm.getMcc());
          pDevice.mCell.setMNC(identityGsm.getMnc());
          pDevice.mCell.setLAC(identityGsm.getLac());
        }
 else         if (info instanceof CellInfoCdma) {
          final CellSignalStrengthCdma cdma=((CellInfoCdma)info).getCellSignalStrength();
          final CellIdentityCdma identityCdma=((CellInfoCdma)info).getCellIdentity();
          pDevice.mCell.setDBM(cdma.getDbm());
          pDevice.mCell.setCID(identityCdma.getBasestationId());
          pDevice.mCell.setMNC(identityCdma.getSystemId());
          pDevice.mCell.setLAC(identityCdma.getNetworkId());
          pDevice.mCell.setSID(identityCdma.getSystemId());
        }
 else         if (info instanceof CellInfoLte) {
          final CellSignalStrengthLte lte=((CellInfoLte)info).getCellSignalStrength();
          final CellIdentityLte identityLte=((CellInfoLte)info).getCellIdentity();
          pDevice.mCell.setDBM(lte.getDbm());
          pDevice.mCell.setTimingAdvance(lte.getTimingAdvance());
          pDevice.mCell.setMCC(identityLte.getMcc());
          pDevice.mCell.setMNC(identityLte.getMnc());
          pDevice.mCell.setCID(identityLte.getCi());
        }
 else         if (lCurrentApiVersion >= Build.VERSION_CODES.JELLY_BEAN_MR2 && info instanceof CellInfoWcdma) {
          final CellSignalStrengthWcdma wcdma=((CellInfoWcdma)info).getCellSignalStrength();
          final CellIdentityWcdma identityWcdma=((CellInfoWcdma)info).getCellIdentity();
          pDevice.mCell.setDBM(wcdma.getDbm());
          pDevice.mCell.setLAC(identityWcdma.getLac());
          pDevice.mCell.setMCC(identityWcdma.getMcc());
          pDevice.mCell.setMNC(identityWcdma.getMnc());
          pDevice.mCell.setCID(identityWcdma.getCid());
          pDevice.mCell.setPSC(identityWcdma.getPsc());
        }
 else {
          log.info("Unknown type of cell signal!" + "\n ClassName: " + info.getClass().getSimpleName() + "\n ToString: "+ info.toString());
        }
        if (pDevice.mCell.isValid())         break;
      }
    }
  }
 catch (  NullPointerException npe) {
    log.error("loadCellInfo: Unable to obtain cell signal information: ",npe);
  }
}
