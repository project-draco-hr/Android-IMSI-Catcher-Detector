{
  String tickerText;
  String contentText="Phone Type " + mDevice.getPhoneType();
  if (mFemtoDetected || mTypeZeroSmsDetected) {
    Status.setCurrentStatus(Status.Type.ALARM,this.context);
  }
 else   if (mChangedLAC) {
    Status.setCurrentStatus(Status.Type.MEDIUM,this.context);
    contentText=context.getString(R.string.hostile_service_area_changing_lac_detected);
  }
 else   if (mCellIdNotInOpenDb) {
    Status.setCurrentStatus(Status.Type.MEDIUM,this.context);
    contentText=context.getString(R.string.cell_id_doesnt_exist_in_db);
  }
 else   if (mTrackingFemtocell || mTrackingCell || mMonitoringCell) {
    Status.setCurrentStatus(Status.Type.NORMAL,this.context);
    if (mTrackingFemtocell) {
      contentText=context.getString(R.string.femtocell_detection_active);
    }
 else     if (mTrackingCell) {
      contentText=context.getString(R.string.cell_tracking_active);
    }
 else {
      contentText=context.getString(R.string.cell_monitoring_active);
    }
  }
 else {
    Status.setCurrentStatus(Status.Type.IDLE,this.context);
  }
switch (Status.getStatus()) {
case IDLE:
    contentText=context.getString(R.string.phone_type) + mDevice.getPhoneType();
  tickerText=context.getResources().getString(R.string.app_name_short) + " " + context.getString(R.string.status_idle);
break;
case NORMAL:
tickerText=context.getResources().getString(R.string.app_name_short) + " " + context.getString(R.string.status_good);
break;
case MEDIUM:
tickerText=context.getResources().getString(R.string.app_name_short);
if (mChangedLAC) {
contentText=context.getString(R.string.hostile_service_area_changing_lac_detected);
tickerText+=" - " + contentText;
}
 else if (mCellIdNotInOpenDb) {
contentText=context.getString(R.string.cell_id_doesnt_exist_in_db);
tickerText+=" - " + contentText;
}
break;
case ALARM:
tickerText=context.getResources().getString(R.string.app_name_short) + " - " + context.getString(R.string.alert_threat_detected);
if (mFemtoDetected) {
contentText=context.getString(R.string.aletr_femtocell_connection_detected);
}
 else if (mTypeZeroSmsDetected) {
contentText=context.getString(R.string.alert_silent_sms_intercepted);
}
break;
default :
tickerText=context.getResources().getString(R.string.main_app_name);
break;
}
Intent notificationIntent=new Intent(context,AIMSICD.class);
notificationIntent.putExtra("silent_sms",mTypeZeroSmsDetected);
notificationIntent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_FROM_BACKGROUND);
PendingIntent contentIntent=PendingIntent.getActivity(context,NOTIFICATION_ID,notificationIntent,PendingIntent.FLAG_CANCEL_CURRENT);
String iconType=prefs.getString(context.getString(R.string.pref_ui_icons_key),"SENSE").toUpperCase();
Notification mBuilder=new NotificationCompat.Builder(context).setSmallIcon(Icon.getIcon(Icon.Type.valueOf(iconType))).setTicker(tickerText).setContentTitle(context.getResources().getString(R.string.main_app_name)).setContentText(contentText).setOngoing(true).setAutoCancel(false).setContentIntent(contentIntent).build();
NotificationManager mNotificationManager=(NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
mNotificationManager.notify(NOTIFICATION_ID,mBuilder);
}
