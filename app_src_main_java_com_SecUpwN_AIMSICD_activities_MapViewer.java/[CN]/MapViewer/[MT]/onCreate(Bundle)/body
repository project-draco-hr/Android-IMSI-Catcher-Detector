{
  Log.i(TAG,"Starting MapViewer");
  super.onCreate(savedInstanceState);
  if (GooglePlayServicesUtil.isGooglePlayServicesAvailable(this) != ConnectionResult.SUCCESS) {
    final AlertDialog.Builder builder=new AlertDialog.Builder(this);
    builder.setMessage(R.string.error_google_play_services_message).setTitle(R.string.error_google_play_services_title);
    builder.create().show();
    finish();
  }
  setContentView(R.layout.map);
  setUpMapIfNeeded();
  mDbHelper=new AIMSICDDbAdapter(this);
  loadEntries();
  mContext=this;
  String mapTypePref=getResources().getString(R.string.pref_map_type_key);
  prefs=mContext.getSharedPreferences(AimsicdService.SHARED_PREFERENCES_BASENAME,0);
  if (prefs.contains(mapTypePref)) {
    int mapType=Integer.parseInt(prefs.getString(mapTypePref,"0"));
switch (mapType) {
case 0:
      mMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
    break;
case 1:
  mMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);
break;
case 2:
mMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);
break;
case 3:
mMap.setMapType(GoogleMap.MAP_TYPE_TERRAIN);
break;
}
}
}
