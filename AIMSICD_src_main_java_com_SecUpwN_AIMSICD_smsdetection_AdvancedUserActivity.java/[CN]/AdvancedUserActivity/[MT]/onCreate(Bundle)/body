{
  super.onCreate(savedInstanceState);
  dbAccess=new AIMSICDDbAdapter(getApplicationContext());
  insertButton=(Button)findViewById(R.id.btn_insert);
  editAdvUserDet=(EditText)findViewById(R.id.edit_adv_user_string);
  spinner=(Spinner)findViewById(R.id.spinner);
  listViewAdv=(ListView)findViewById(R.id.listView_Adv_Activity);
  try {
    msgItems=dbAccess.getDetectionStrings();
  }
 catch (  Exception ee) {
    log.error("Database error",ee);
    msgItems=new ArrayList<>();
    AdvanceUserItems advUserItems=new AdvanceUserItems();
    advUserItems.setDetection_string("NO DATA");
    advUserItems.setDetection_type("No TYPE");
    msgItems.add(advUserItems);
  }
  listViewAdv.setAdapter(new AdvanceUserBaseAdapter(getApplicationContext(),msgItems));
  listViewAdv.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener(){
    @Override public boolean onItemLongClick(    AdapterView<?> a,    View v,    int position,    long id){
      Object o=listViewAdv.getItemAtPosition(position);
      AdvanceUserItems itemDetails=(AdvanceUserItems)o;
      String itemDetail=itemDetails.getDetection_string();
      if (dbAccess.deleteDetectionString(itemDetails.getDetection_string())) {
        Toast.makeText(getApplicationContext(),getString(R.string.deleted) + ": " + itemDetail,Toast.LENGTH_SHORT).show();
      }
 else {
        Toast.makeText(getApplicationContext(),getString(R.string.failed_to_delete) + " " + itemDetail,Toast.LENGTH_SHORT).show();
      }
      try {
        loadDbString();
      }
 catch (      Exception ee) {
        log.debug("Error loading db string",ee);
      }
      return false;
    }
  }
);
  insertButton.setOnClickListener(new View.OnClickListener(){
    @Override public void onClick(    View view){
      if (editAdvUserDet.getText().toString().contains("\"")) {
        Toast.makeText(getApplicationContext(),R.string.double_quote_will_cause_db_error,Toast.LENGTH_SHORT).show();
      }
 else {
        ContentValues store_new_sms_string=new ContentValues();
        store_new_sms_string.put(DBTableColumnIds.DETECTION_STRINGS_LOGCAT_STRING,editAdvUserDet.getText().toString());
        store_new_sms_string.put(DBTableColumnIds.DETECTION_STRINGS_SMS_TYPE,spinner.getSelectedItem().toString());
        if (dbAccess.insertNewDetectionString(store_new_sms_string)) {
          Toast.makeText(getApplicationContext(),R.string.the_string_was_added_to_db,Toast.LENGTH_SHORT).show();
        }
 else {
          Toast.makeText(getApplicationContext(),R.string.failed_to_add_the_string_to_db,Toast.LENGTH_SHORT).show();
        }
        try {
          loadDbString();
        }
 catch (        Exception ee) {
          log.error(ee.getMessage(),ee);
        }
      }
    }
  }
);
}
