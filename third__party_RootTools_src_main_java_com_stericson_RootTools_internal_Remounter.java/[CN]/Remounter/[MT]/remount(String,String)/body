{
  if (file.endsWith("/") && !file.equals("/")) {
    file=file.substring(0,file.lastIndexOf("/"));
  }
  boolean foundMount=false;
  while (!foundMount) {
    try {
      for (      Mount mount : RootTools.getMounts()) {
        RootTools.log(mount.getMountPoint().toString());
        if (file.equals(mount.getMountPoint().toString())) {
          foundMount=true;
          break;
        }
      }
    }
 catch (    Exception e) {
      if (RootTools.debugMode) {
        e.printStackTrace();
      }
      return false;
    }
    if (!foundMount) {
      try {
        file=(new File(file).getParent());
      }
 catch (      Exception e) {
        e.printStackTrace();
        return false;
      }
    }
  }
  Mount mountPoint=findMountPointRecursive(file);
  if (mountPoint != null) {
    RootTools.log(Constants.TAG,"Remounting " + mountPoint.getMountPoint().getAbsolutePath() + " as "+ mountType.toLowerCase());
    final boolean isMountMode=mountPoint.getFlags().contains(mountType.toLowerCase());
    if (!isMountMode) {
      try {
        CommandCapture command=new CommandCapture(0,true,"busybox mount -o remount," + mountType.toLowerCase() + " "+ mountPoint.getDevice().getAbsolutePath()+ " "+ mountPoint.getMountPoint().getAbsolutePath(),"toolbox mount -o remount," + mountType.toLowerCase() + " "+ mountPoint.getDevice().getAbsolutePath()+ " "+ mountPoint.getMountPoint().getAbsolutePath(),"mount -o remount," + mountType.toLowerCase() + " "+ mountPoint.getDevice().getAbsolutePath()+ " "+ mountPoint.getMountPoint().getAbsolutePath(),"/system/bin/toolbox mount -o remount," + mountType.toLowerCase() + " "+ mountPoint.getDevice().getAbsolutePath()+ " "+ mountPoint.getMountPoint().getAbsolutePath());
        Shell.startRootShell().add(command);
        commandWait(command);
      }
 catch (      Exception e) {
      }
      mountPoint=findMountPointRecursive(file);
    }
    if (mountPoint != null) {
      RootTools.log(Constants.TAG,mountPoint.getFlags() + " AND " + mountType.toLowerCase());
      if (mountPoint.getFlags().contains(mountType.toLowerCase())) {
        RootTools.log(mountPoint.getFlags().toString());
        return true;
      }
 else {
        RootTools.log(mountPoint.getFlags().toString());
        return false;
      }
    }
 else {
      RootTools.log("mount is null, file was: " + file + " mountType was: "+ mountType);
    }
  }
 else {
    RootTools.log("mount is null, file was: " + file + " mountType was: "+ mountType);
  }
  return false;
}
