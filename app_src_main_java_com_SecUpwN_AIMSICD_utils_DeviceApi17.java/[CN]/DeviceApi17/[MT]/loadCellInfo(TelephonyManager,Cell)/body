{
  try {
    List<CellInfo> cellInfoList=tm.getAllCellInfo();
    if (cellInfoList != null) {
      for (      final CellInfo info : cellInfoList) {
        mCell=new Cell();
        mCell.setNetType(tm.getNetworkType());
        if (info instanceof CellInfoGsm) {
          final CellSignalStrengthGsm gsm=((CellInfoGsm)info).getCellSignalStrength();
          final CellIdentityGsm identityGsm=((CellInfoGsm)info).getCellIdentity();
          mCell.setDBM(gsm.getDbm());
          mCell.setCID(identityGsm.getCid());
          mCell.setMCC(identityGsm.getMcc());
          mCell.setMNC(identityGsm.getMnc());
          mCell.setLAC(identityGsm.getLac());
        }
 else         if (info instanceof CellInfoCdma) {
          final CellSignalStrengthCdma cdma=((CellInfoCdma)info).getCellSignalStrength();
          final CellIdentityCdma identityCdma=((CellInfoCdma)info).getCellIdentity();
          mCell.setDBM(cdma.getDbm());
          mCell.setCID(identityCdma.getBasestationId());
          mCell.setMNC(identityCdma.getSystemId());
          mCell.setLAC(identityCdma.getNetworkId());
          mCell.setSID(identityCdma.getSystemId());
        }
 else         if (info instanceof CellInfoLte) {
          final CellSignalStrengthLte lte=((CellInfoLte)info).getCellSignalStrength();
          final CellIdentityLte identityLte=((CellInfoLte)info).getCellIdentity();
          mCell.setDBM(lte.getDbm());
          mCell.setTimingAdvance(lte.getTimingAdvance());
          mCell.setMCC(identityLte.getMcc());
          mCell.setMNC(identityLte.getMnc());
          mCell.setCID(identityLte.getCi());
        }
 else         if (info instanceof CellInfoWcdma) {
          final CellSignalStrengthWcdma wcdma=((CellInfoWcdma)info).getCellSignalStrength();
          final CellIdentityWcdma identityWcdma=((CellInfoWcdma)info).getCellIdentity();
          mCell.setDBM(wcdma.getDbm());
          mCell.setLAC(identityWcdma.getLac());
          mCell.setMCC(identityWcdma.getMcc());
          mCell.setMNC(identityWcdma.getMnc());
          mCell.setCID(identityWcdma.getCid());
          mCell.setPSC(identityWcdma.getPsc());
        }
 else {
          Log.i(TAG,"Unknown type of cell signal!" + "ClassName: " + info.getClass().getSimpleName() + " ToString: "+ info.toString());
        }
        if (mCell.isValid())         break;
      }
    }
  }
 catch (  NullPointerException npe) {
    Log.e(TAG,"Unable to obtain cell signal information",npe);
  }
}
