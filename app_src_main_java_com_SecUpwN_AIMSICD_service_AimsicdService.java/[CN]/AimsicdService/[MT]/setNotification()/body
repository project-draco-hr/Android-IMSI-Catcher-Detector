{
  String tickerText;
  String contentText="Phone Type " + mDevice.getPhoneType();
  String iconType=prefs.getString(this.getString(R.string.pref_ui_icons_key),"sense");
  int status;
  if (mFemtoDetected || mTypeZeroSmsDetected) {
    status=4;
  }
 else   if (mChangedLAC) {
    status=3;
    contentText="Hostile Service Area: Changing LAC Detected";
  }
 else   if (mTrackingFemtocell || mTrackingCell || mMonitoringCell) {
    status=2;
    if (mTrackingFemtocell) {
      contentText="FemtoCell Detection Active";
    }
 else     if (mTrackingCell) {
      contentText="Cell Tracking Active";
    }
 else {
      contentText="Cell Monitoring Active";
    }
  }
 else {
    status=1;
  }
  int icon=R.drawable.sense_idle;
switch (status) {
case 1:
switch (iconType) {
case "flat":
      icon=R.drawable.flat_idle;
    break;
case "sense":
  icon=R.drawable.sense_idle;
break;
case "white":
icon=R.drawable.white_idle;
break;
}
tickerText=getResources().getString(R.string.app_name_short) + " - Status: Idle";
break;
case 2:
switch (iconType) {
case "flat":
icon=R.drawable.flat_ok;
break;
case "sense":
icon=R.drawable.sense_ok;
break;
case "white":
icon=R.drawable.white_ok;
break;
}
tickerText=getResources().getString(R.string.app_name_short) + " - Status: Good No Threats Detected";
break;
case 3:
switch (iconType) {
case "flat":
icon=R.drawable.flat_medium;
break;
case "sense":
icon=R.drawable.sense_medium;
break;
case "white":
icon=R.drawable.white_medium;
break;
}
tickerText=getResources().getString(R.string.app_name_short) + " - Hostile Service Area: Changing LAC Detected";
break;
case 4:
switch (iconType) {
case "flat":
icon=R.drawable.flat_danger;
break;
case "sense":
icon=R.drawable.sense_danger;
break;
case "white":
icon=R.drawable.white_danger;
break;
}
tickerText=getResources().getString(R.string.app_name_short) + " - ALERT!! Threat Detected";
if (mFemtoDetected) {
contentText="ALERT!! FemtoCell Connection Threat Detected";
}
 else if (mTypeZeroSmsDetected) {
contentText="ALERT!! Type Zero Silent SMS Intercepted";
}
break;
default :
icon=R.drawable.sense_idle;
tickerText=getResources().getString(R.string.app_name);
break;
}
Intent notificationIntent=new Intent(mContext,AIMSICD.class);
notificationIntent.putExtra("silent_sms",mTypeZeroSmsDetected);
notificationIntent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_FROM_BACKGROUND);
PendingIntent contentIntent=PendingIntent.getActivity(mContext,NOTIFICATION_ID,notificationIntent,PendingIntent.FLAG_CANCEL_CURRENT);
Notification mBuilder=new NotificationCompat.Builder(this).setSmallIcon(icon).setTicker(tickerText).setContentTitle(this.getResources().getString(R.string.app_name)).setContentText(contentText).setOngoing(true).setAutoCancel(false).setContentIntent(contentIntent).build();
NotificationManager mNotificationManager=(NotificationManager)this.getSystemService(Context.NOTIFICATION_SERVICE);
mNotificationManager.notify(NOTIFICATION_ID,mBuilder);
}
