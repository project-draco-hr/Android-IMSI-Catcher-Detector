{
  setSmsDetectionState(true);
  try {
    new Thread().sleep(500);
    String MODE="logcat -v time -b radio -b main\n";
    Runtime r=Runtime.getRuntime();
    Process process=r.exec("su");
    dos=new DataOutputStream(process.getOutputStream());
    dos.writeBytes(MODE);
    dos.flush();
    dos.close();
    dis=new DataInputStream(process.getInputStream());
  }
 catch (  InterruptedException e) {
    Log.e(TAG,"thread interrupted",e);
  }
catch (  IOException e) {
    Log.e(TAG,"thread interrupted",e);
  }
  while (getSmsDetectionState()) {
    try {
      int bufferlen=dis.available();
      if (bufferlen != 0) {
        byte[] b=new byte[bufferlen];
        dis.read(b);
        String split[]=new String(b).split("\n");
        checkForSilentSms(split);
      }
 else {
        Thread.sleep(1000);
      }
    }
 catch (    IOException e) {
      Log.e(TAG,"IOE Stacktrace",e);
    }
catch (    InterruptedException e) {
      Log.e(TAG,"IE Exception",e);
    }
  }
}
