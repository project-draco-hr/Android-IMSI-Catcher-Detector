{
synchronized (Command.this) {
    if (mHandler != null && handlerEnabled) {
      Message msg=mHandler.obtainMessage();
      Bundle bundle=new Bundle();
      bundle.putInt(CommandHandler.ACTION,CommandHandler.COMMAND_TERMINATED);
      bundle.putString(CommandHandler.TEXT,reason);
      msg.setData(bundle);
      mHandler.sendMessage(msg);
    }
 else {
      commandTerminated(id,reason);
    }
    RootTools.log("Command " + id + " did not finish because it was terminated. Termination reason: "+ reason);
    setExitCode(-1);
    terminated=true;
    finishCommand();
  }
}
