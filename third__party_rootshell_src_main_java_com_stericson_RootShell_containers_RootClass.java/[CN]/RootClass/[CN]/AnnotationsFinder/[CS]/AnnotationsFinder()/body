{
  System.out.println("Discovering root class annotations...");
  classFiles=new ArrayList<File>();
  lookup(new File("src"),classFiles);
  System.out.println("Done discovering annotations. Building jar file.");
  File builtPath=getBuiltPath();
  if (null != builtPath) {
    String rc1="com" + File.separator + "stericson"+ File.separator+ "RootShell"+ File.separator+ "containers"+ File.separator+ "RootClass.class";
    String rc2="com" + File.separator + "stericson"+ File.separator+ "RootShell"+ File.separator+ "containers"+ File.separator+ "RootClass$RootArgs.class";
    String rc3="com" + File.separator + "stericson"+ File.separator+ "RootShell"+ File.separator+ "containers"+ File.separator+ "RootClass$AnnotationsFinder.class";
    String rc4="com" + File.separator + "stericson"+ File.separator+ "RootShell"+ File.separator+ "containers"+ File.separator+ "RootClass$AnnotationsFinder$1.class";
    String rc5="com" + File.separator + "stericson"+ File.separator+ "RootShell"+ File.separator+ "containers"+ File.separator+ "RootClass$AnnotationsFinder$2.class";
    String[] cmd;
    boolean onWindows=(-1 != System.getProperty("os.name").toLowerCase().indexOf("win"));
    if (onWindows) {
      StringBuilder sb=new StringBuilder(" " + rc1 + " "+ rc2+ " "+ rc3+ " "+ rc4+ " "+ rc5);
      for (      File file : classFiles) {
        sb.append(" " + file.getPath());
      }
      cmd=new String[]{"cmd","/C","jar cvf" + " anbuild.jar" + sb.toString()};
    }
 else {
      ArrayList<String> al=new ArrayList<String>();
      al.add("jar");
      al.add("cf");
      al.add("anbuild.jar");
      al.add(rc1);
      al.add(rc2);
      al.add(rc3);
      al.add(rc4);
      al.add(rc5);
      for (      File file : classFiles) {
        al.add(file.getPath());
      }
      cmd=al.toArray(new String[al.size()]);
    }
    ProcessBuilder jarBuilder=new ProcessBuilder(cmd);
    jarBuilder.directory(builtPath);
    try {
      jarBuilder.start().waitFor();
    }
 catch (    IOException e) {
    }
catch (    InterruptedException e) {
    }
    File rawFolder=new File("res" + File.separator + "raw");
    if (!rawFolder.exists()) {
      rawFolder.mkdirs();
    }
    System.out.println("Done building jar file. Creating dex file.");
    if (onWindows) {
      cmd=new String[]{"cmd","/C","dx --dex --output=res" + File.separator + "raw"+ File.separator+ "anbuild.dex "+ builtPath+ File.separator+ "anbuild.jar"};
    }
 else {
      cmd=new String[]{getPathToDx(),"--dex","--output=res" + File.separator + "raw"+ File.separator+ "anbuild.dex",builtPath + File.separator + "anbuild.jar"};
    }
    ProcessBuilder dexBuilder=new ProcessBuilder(cmd);
    try {
      dexBuilder.start().waitFor();
    }
 catch (    IOException e) {
    }
catch (    InterruptedException e) {
    }
  }
  System.out.println("All done. ::: anbuild.dex should now be in your project's res" + File.separator + "raw"+ File.separator+ " folder :::");
}
