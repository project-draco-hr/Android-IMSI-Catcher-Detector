{
  LocationManager lm=(LocationManager)this.getSystemService(Context.LOCATION_SERVICE);
  List<String> providers=lm.getProviders(true);
  Location l=null;
  for (  String provider : providers) {
    l=lm.getLastKnownLocation(provider);
    if (l != null)     break;
  }
  double[] gps=new double[2];
  if (l != null) {
    gps[0]=l.getLatitude();
    gps[1]=l.getLongitude();
  }
  return gps;
}
