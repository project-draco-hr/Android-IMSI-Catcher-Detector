{
  if (TrackingLocation) {
    lm.removeUpdates(sLocationListener);
    TrackingLocation=false;
    sLongitude=0.0;
    sLatitude=0.0;
  }
 else {
    if (lm != null) {
      Log.i(TAG,"LocationManager already existed");
      lm.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0,sLocationListener);
      TrackingLocation=true;
    }
 else {
      Log.i(TAG,"LocationManager did not existed");
      lm=(LocationManager)ctx.getSystemService(Context.LOCATION_SERVICE);
      if (lm != null) {
        if (lm.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
          Log.i(TAG,"LocationManager created");
          sLocationListener=new MyLocationListener();
          lm.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0,sLocationListener);
          TrackingLocation=true;
        }
 else {
          Log.i(TAG,"GPS not allowed");
          AlertDialog.Builder msg=new AlertDialog.Builder(ctx);
          msg.setMessage("GPS is not enabled!. You won???t be able to use GPS data until you enable it");
          AlertDialog alert=msg.create();
          alert.setTitle("Error:");
          alert.show();
          lm=null;
        }
      }
    }
  }
}
