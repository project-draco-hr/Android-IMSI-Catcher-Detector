{
  mIMEI=tm.getDeviceId();
  mIMEIV=tm.getDeviceSoftwareVersion();
  mPhoneID=tm.getPhoneType();
  mRoaming=tm.isNetworkRoaming();
  mNetID=tm.getNetworkType();
  mNetType=getNetworkTypeName();
switch (mPhoneID) {
case TelephonyManager.PHONE_TYPE_GSM:
    mPhoneType="GSM";
  mMncmcc=tm.getNetworkOperator();
if (mMncmcc != null) {
  mMcc=Integer.parseInt(tm.getNetworkOperator().substring(0,3));
  mMnc=Integer.parseInt(tm.getNetworkOperator().substring(3));
}
mNetName=tm.getNetworkOperatorName();
GsmCellLocation gsmCellLocation=(GsmCellLocation)tm.getCellLocation();
if (gsmCellLocation != null) {
mCellID=(gsmCellLocation.getCid() == 0x7FFFFFFF) ? gsmCellLocation.getCid() & 0xffff : gsmCellLocation.getCid();
mLac=(gsmCellLocation.getLac() == 0x7FFFFFFF) ? gsmCellLocation.getLac() & 0xffff : gsmCellLocation.getLac();
mPSC=gsmCellLocation.getPsc();
}
break;
case TelephonyManager.PHONE_TYPE_CDMA:
mPhoneType="CDMA";
CdmaCellLocation cdmaCellLocation=(CdmaCellLocation)tm.getCellLocation();
if (cdmaCellLocation != null) {
mCellID=cdmaCellLocation.getBaseStationId();
mLac=cdmaCellLocation.getNetworkId();
mSID=cdmaCellLocation.getSystemId();
}
break;
}
if (Build.VERSION.SDK_INT > 16) {
try {
List<CellInfo> cellInfoList=tm.getAllCellInfo();
if (cellInfoList != null) {
for (final CellInfo info : cellInfoList) {
if (info instanceof CellInfoGsm) {
final CellSignalStrengthGsm gsm=((CellInfoGsm)info).getCellSignalStrength();
final CellIdentityGsm identityGsm=((CellInfoGsm)info).getCellIdentity();
mSignalInfo=gsm.getDbm();
mCellID=identityGsm.getCid();
mMcc=identityGsm.getMcc();
mMnc=identityGsm.getMnc();
mLac=identityGsm.getLac();
}
 else if (info instanceof CellInfoCdma) {
final CellSignalStrengthCdma cdma=((CellInfoCdma)info).getCellSignalStrength();
final CellIdentityCdma identityCdma=((CellInfoCdma)info).getCellIdentity();
mSignalInfo=cdma.getDbm();
mCellID=identityCdma.getBasestationId();
mLac=identityCdma.getNetworkId();
mSID=identityCdma.getSystemId();
}
 else if (info instanceof CellInfoLte) {
final CellSignalStrengthLte lte=((CellInfoLte)info).getCellSignalStrength();
final CellIdentityLte identityLte=((CellInfoLte)info).getCellIdentity();
mSignalInfo=lte.getDbm();
mTimingAdvance=lte.getTimingAdvance();
mMcc=identityLte.getMcc();
mMnc=identityLte.getMnc();
mCellID=identityLte.getCi();
}
 else if (info instanceof CellInfoWcdma) {
final CellSignalStrengthWcdma wcdma=((CellInfoWcdma)info).getCellSignalStrength();
final CellIdentityWcdma identityWcdma=((CellInfoWcdma)info).getCellIdentity();
mSignalInfo=wcdma.getDbm();
mLac=identityWcdma.getLac();
mMcc=identityWcdma.getMcc();
mMnc=identityWcdma.getMnc();
mCellID=identityWcdma.getCid();
mPSC=identityWcdma.getPsc();
}
 else {
Log.i(TAG,"Unknown type of cell signal!" + "ClassName: " + info.getClass().getSimpleName() + " ToString: "+ info.toString());
}
}
}
}
 catch (NullPointerException npe) {
Log.e(TAG,"Unable to obtain cell signal information",npe);
}
}
mSimCountry=getSimCountry(tm);
mSimOperator=getSimOperator(tm);
mSimOperatorName=getSimOperatorName(tm);
mSimSerial=getSimSerial(tm);
mSimSubs=getSimSubs(tm);
mDataActivityType=getDataActivity(tm);
mDataState=getDataState(tm);
}
