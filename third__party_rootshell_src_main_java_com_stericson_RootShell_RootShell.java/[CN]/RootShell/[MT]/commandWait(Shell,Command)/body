{
  while (!cmd.isFinished()) {
    RootShell.log(version,shell.getCommandQueuePositionString(cmd));
    RootShell.log(version,"Processed " + cmd.totalOutputProcessed + " of "+ cmd.totalOutput+ " output from command.");
synchronized (cmd) {
      try {
        if (!cmd.isFinished()) {
          cmd.wait(2000);
        }
      }
 catch (      InterruptedException e) {
        e.printStackTrace();
      }
    }
    if (!cmd.isExecuting() && !cmd.isFinished()) {
      if (!shell.isExecuting && !shell.isReading) {
        RootShell.log(version,"Waiting for a command to be executed in a shell that is not executing and not reading! \n\n Command: " + cmd.getCommand());
        Exception e=new Exception();
        e.setStackTrace(Thread.currentThread().getStackTrace());
        e.printStackTrace();
      }
 else       if (shell.isExecuting && !shell.isReading) {
        RootShell.log(version,"Waiting for a command to be executed in a shell that is executing but not reading! \n\n Command: " + cmd.getCommand());
        Exception e=new Exception();
        e.setStackTrace(Thread.currentThread().getStackTrace());
        e.printStackTrace();
      }
 else {
        RootShell.log(version,"Waiting for a command to be executed in a shell that is not reading! \n\n Command: " + cmd.getCommand());
        Exception e=new Exception();
        e.setStackTrace(Thread.currentThread().getStackTrace());
        e.printStackTrace();
      }
    }
  }
}
